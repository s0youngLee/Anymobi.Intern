{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kelly\\\\IdeaProjects\\\\restAPI\\\\src\\\\main\\\\front-end\\\\app_board\\\\src\\\\func.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport _ from \"lodash\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const sliceArrayByLimit = (totalPage, limit) => {\n  const totalPageArray = Array(totalPage).fill().map((_, i) => i);\n  return Array(Math.ceil(totalPage / limit)).fill().map(() => totalPageArray.splice(0, limit));\n};\nexport function User(Login) {\n  _s();\n\n  const [user, setUser] = useState({\n    data: {}\n  });\n  useEffect(() => {\n    if (Login) {\n      axios.get(`/user`).then(res => {\n        setUser(res === null || res === void 0 ? void 0 : res.data);\n      }).catch(e => {\n        ifError(e);\n      });\n    }\n  }, [Login]);\n\n  if (_.isEmpty(user)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" Loading ... \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 33\n    }, this);\n  } else {\n    return user.data;\n  }\n}\n\n_s(User, \"7DSxR+TQ7XcT4x57+QlWE58lXbs=\");\n\n_c = User;\nexport function canChange(user, id) {\n  return isAdmin(user === null || user === void 0 ? void 0 : user.auth) || _.isEqual(id, user === null || user === void 0 ? void 0 : user.nick_name);\n}\nexport function isAdmin(auth) {\n  if (_.isEqual(auth, \"ROLE_ADMIN\")) {\n    return true;\n  } else {\n    return false;\n  }\n}\nexport function getUrlId(n) {\n  const urlList = window.location.href.split('/');\n  const id = urlList[urlList.length - n];\n  return id;\n}\nexport function FetchWithoutId(dataName) {\n  _s2();\n\n  const [data, setData] = useState({\n    data: {}\n  });\n  useEffect(() => {\n    axios.get(`/${dataName}`).then(res => {\n      setData(res === null || res === void 0 ? void 0 : res.data);\n    }).catch(e => {\n      ifError(e);\n    });\n  }, [dataName]);\n\n  if (_.isEmpty(data)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" Loading ... \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 33\n    }, this);\n  } else {\n    return data;\n  }\n}\n\n_s2(FetchWithoutId, \"EpNGfgEa+TPyS6hWw3ADUNCIuyY=\");\n\n_c2 = FetchWithoutId;\nexport function FetchWithId(dataName, n) {\n  _s3();\n\n  const [data, setData] = useState({\n    data: {}\n  });\n  const [param, setParam] = useState(\"\");\n  useEffect(() => {\n    if (isNaN(Number(n))) {\n      setParam(n);\n    } else {\n      setParam(getUrlId(n));\n    }\n\n    console.log(param);\n    axios.get(`/${dataName}/${param}`).then(res => {\n      setData(res === null || res === void 0 ? void 0 : res.data);\n    }).catch(e => {\n      ifError(e);\n    });\n  }, [dataName, param]);\n\n  if (_.isEmpty(data)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" Loading ... \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }, this);\n  } else {\n    return data;\n  }\n}\n\n_s3(FetchWithId, \"52n5DGed049sZL+IJ8OeFUHcK2Q=\");\n\n_c3 = FetchWithId;\nexport function Delete(dataName, dataId) {\n  if (window.confirm(\"Do you really want to delete?\")) {\n    axios.delete(`/${dataName}/${dataId}`).then(() => {\n      alert(\"Successfully deleted.\");\n\n      if (_.isEqual(dataName, \"comment\")) {\n        window.location.reload();\n      } else {\n        window.location.replace(`/${dataName}`);\n      }\n    }).catch(e => {\n      alert(\"Failed to delete.\");\n      window.location.reload();\n    });\n  }\n}\n_c4 = Delete;\nexport function ifError(e) {\n  if (e.response.status === 400) {\n    alert(\"Bad Request\");\n    window.location.reload();\n  } else if (e.response.status === 401) {\n    alert(\"Don't have permission.\\nPlease Login.\");\n    window.location.replace(\"/login\");\n  } else if (e.response.status === 403) {\n    alert(\"Response rejected.\");\n    window.location.replace(\"/\");\n  } else if (e.response.status === 404) {\n    /*#__PURE__*/\n    _jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\" SORRY \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 24\n        }, this), \" Page Not Found \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 50\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"We can't found this page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        className: \"none\",\n        to: `/`,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"w3-button w3-border w3-round-xlarge w3-small w3-hover-red\",\n          children: \"HOME\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 45\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this);\n  } else {\n    alert(\"Error : \" + e.response.status + \" \" + e.response.statusText + \"\\nReturn to Home.\");\n    window.location.href = \"/\";\n  }\n}\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"User\");\n$RefreshReg$(_c2, \"FetchWithoutId\");\n$RefreshReg$(_c3, \"FetchWithId\");\n$RefreshReg$(_c4, \"Delete\");","map":{"version":3,"names":["React","useState","useEffect","Link","_","axios","sliceArrayByLimit","totalPage","limit","totalPageArray","Array","fill","map","i","Math","ceil","splice","User","Login","user","setUser","data","get","then","res","catch","e","ifError","isEmpty","canChange","id","isAdmin","auth","isEqual","nick_name","getUrlId","n","urlList","window","location","href","split","length","FetchWithoutId","dataName","setData","FetchWithId","param","setParam","isNaN","Number","console","log","Delete","dataId","confirm","delete","alert","reload","replace","response","status","statusText"],"sources":["C:/Users/kelly/IdeaProjects/restAPI/src/main/front-end/app_board/src/func.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport _ from \"lodash\";\r\nimport axios from \"axios\";\r\n\r\nexport const sliceArrayByLimit = (totalPage, limit) => {\r\n    const totalPageArray = Array(totalPage)\r\n      .fill()\r\n      .map((_, i) => i);\r\n    return Array(Math.ceil(totalPage / limit))\r\n      .fill()\r\n      .map(() => totalPageArray.splice(0, limit));\r\n  };\r\n\r\nexport function User(Login){\r\n    const [user, setUser] = useState({ data : {} });\r\n    useEffect(() => {\r\n        if(Login){\r\n            axios.get(`/user`)\r\n            .then((res) => {\r\n                setUser(res?.data)\r\n            })\r\n            .catch((e) => {\r\n                ifError(e);\r\n            });\r\n        }\r\n    }, [Login]);\r\n    if(_.isEmpty(user)){ return <div> Loading ... </div> }\r\n    else{ return user.data; }\r\n}\r\n\r\nexport function canChange(user, id){\r\n    return isAdmin(user?.auth) ||  _.isEqual(id, user?.nick_name);\r\n}\r\n\r\nexport function isAdmin(auth){\r\n    if(_.isEqual(auth, \"ROLE_ADMIN\")){\r\n        return true;\r\n    }else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function getUrlId(n){\r\n    const urlList = ((window.location.href).split('/'));\r\n    const id = urlList[(urlList.length)-n];\r\n    return id;\r\n}\r\n\r\nexport function FetchWithoutId(dataName){\r\n    const [data, setData] = useState({ data : {} });\r\n    useEffect(() => {\r\n        axios.get(`/${dataName}`)\r\n        .then((res) => {\r\n            setData(res?.data);\r\n        })\r\n        .catch((e) => {\r\n            ifError(e);\r\n        });\r\n    }, [dataName]);\r\n    if(_.isEmpty(data)){ return <div> Loading ... </div> }\r\n    else{ return data; }\r\n}\r\n\r\nexport function FetchWithId(dataName, n){\r\n    const [data, setData] = useState({ data : {} });\r\n    const [param, setParam] = useState(\"\");\r\n    useEffect(() => {\r\n        if(isNaN(Number(n))){\r\n            setParam(n);\r\n        }else{\r\n            setParam(getUrlId(n));\r\n        }\r\n        console.log(param);\r\n        axios.get(`/${dataName}/${param}`)\r\n        .then((res) => {\r\n            setData(res?.data);\r\n        })\r\n        .catch((e) => {\r\n            ifError(e);\r\n        });\r\n    }, [dataName, param]);\r\n    if(_.isEmpty(data)){ return <div> Loading ... </div>}\r\n    else{ return data;}\r\n}\r\n\r\nexport function Delete(dataName, dataId){\r\n    if (window.confirm(\"Do you really want to delete?\")){\r\n        axios.delete(`/${dataName}/${dataId}`).then(() => {\r\n            alert(\"Successfully deleted.\");\r\n            if(_.isEqual(dataName, \"comment\")){\r\n                window.location.reload();\r\n            }else {\r\n                window.location.replace(`/${dataName}`);\r\n            }\r\n        }).catch((e) => {\r\n            alert(\"Failed to delete.\");\r\n            window.location.reload();\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport function ifError(e){\r\n    if(e.response.status === 400){\r\n        alert(\"Bad Request\");\r\n        window.location.reload();\r\n    }else if(e.response.status === 401){\r\n        alert(\"Don't have permission.\\nPlease Login.\");\r\n        window.location.replace(\"/login\");\r\n    }else if(e.response.status === 403){\r\n        alert(\"Response rejected.\");\r\n        window.location.replace(\"/\");\r\n    }else if(e.response.status === 404){\r\n        <div>\r\n            <h1> SORRY <br/> Page Not Found </h1><hr/>\r\n            <b>We can't found this page.</b>\r\n            <Link className=\"none\" to={`/`}><button className=\"w3-button w3-border w3-round-xlarge w3-small w3-hover-red\">HOME</button></Link>\r\n        </div>\r\n    }else{\r\n        alert(\"Error : \" + e.response.status + \" \" + e.response.statusText + \"\\nReturn to Home.\");\r\n        window.location.href=\"/\";\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}